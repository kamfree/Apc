{% extends 'base.html' %}
{% block content %}
<h2>Order #{{ order.id }}</h2>
<p><strong>User:</strong> {{ order.user.email }}</p>
<p><strong>Status:</strong> {{ order.status }}</p>
<p><strong>Shipping:</strong> {{ order.shipping_name }}, {{ order.shipping_address }}, {{ order.shipping_city }}, {{ order.shipping_postal_code }}, {{ order.shipping_country }}</p>

<h5>Items</h5>
<table class="table">
  <thead><tr><th>Product</th><th>Qty</th><th>Unit Price</th><th>Subtotal</th></tr></thead>
  <tbody>
  {% for item in order.items %}
    <tr>
      <td>{{ item.product.title }}</td>
      <td>{{ item.quantity }}</td>
      <td>${{ '%.2f'|format(item.unit_price) }}</td>
      <td>${{ '%.2f'|format(item.unit_price * item.quantity) }}</td>
    </tr>
  {% endfor %}
  </tbody>
</table>
<p><strong>Total:</strong> ${{ '%.2f'|format(order.total_amount) }}</p>

<h5>Update Status</h5>
<form method="post">
  {{ form.hidden_tag() }}
  <div class="mb-3">{{ form.status.label }} {{ form.status(class_='form-select') }}</div>
  {{ form.submit(class_='btn btn-primary') }}
</form>
{% endblock %}